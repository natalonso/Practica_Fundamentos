<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Detección, tratamiento e imputación de datos faltantes | Practica Fundamentos Casas</title>
  <meta name="description" content="6 Detección, tratamiento e imputación de datos faltantes | Practica Fundamentos Casas" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Detección, tratamiento e imputación de datos faltantes | Practica Fundamentos Casas" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Detección, tratamiento e imputación de datos faltantes | Practica Fundamentos Casas" />
  
  
  

<meta name="author" content="Natalia Alonso, Beatriz Martín y Susana Albarran" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="análisis-exploratorio-de-datos.html"/>
<link rel="next" href="selección-de-variable.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.10/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="chapter" data-level="2" data-path="objetivo-del-estudio.html"><a href="objetivo-del-estudio.html"><i class="fa fa-check"></i><b>2</b> Objetivo del estudio</a></li>
<li class="chapter" data-level="3" data-path="descripción-de-los-datos.html"><a href="descripción-de-los-datos.html"><i class="fa fa-check"></i><b>3</b> Descripción de los datos</a></li>
<li class="chapter" data-level="4" data-path="train-test-y-validación.html"><a href="train-test-y-validación.html"><i class="fa fa-check"></i><b>4</b> Train, test y validación</a></li>
<li class="chapter" data-level="5" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html"><i class="fa fa-check"></i><b>5</b> Análisis exploratorio de datos</a><ul>
<li class="chapter" data-level="5.1" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#características-de-las-casas"><i class="fa fa-check"></i><b>5.1</b> Características de las casas</a></li>
<li class="chapter" data-level="5.2" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#calidad"><i class="fa fa-check"></i><b>5.2</b> Calidad</a></li>
<li class="chapter" data-level="5.3" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#localización"><i class="fa fa-check"></i><b>5.3</b> Localización</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="detección-tratamiento-e-imputación-de-datos-faltantes.html"><a href="detección-tratamiento-e-imputación-de-datos-faltantes.html"><i class="fa fa-check"></i><b>6</b> Detección, tratamiento e imputación de datos faltantes</a></li>
<li class="chapter" data-level="7" data-path="selección-de-variable.html"><a href="selección-de-variable.html"><i class="fa fa-check"></i><b>7</b> Selección de variable</a></li>
<li class="chapter" data-level="8" data-path="ajuste-interpretación-y-diagnosis-del-modelo-de-regresión-lineal-múltiple.html"><a href="ajuste-interpretación-y-diagnosis-del-modelo-de-regresión-lineal-múltiple.html"><i class="fa fa-check"></i><b>8</b> Ajuste, interpretación y diagnosis del modelo de regresión lineal múltiple</a></li>
<li class="chapter" data-level="9" data-path="test.html"><a href="test.html"><i class="fa fa-check"></i><b>9</b> Test</a><ul>
<li class="chapter" data-level="9.1" data-path="test.html"><a href="test.html#variable-respuesta-test-vs-valor-predicho"><i class="fa fa-check"></i><b>9.1</b> Variable respuesta test vs valor predicho</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Practica Fundamentos Casas</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="detección-tratamiento-e-imputación-de-datos-faltantes" class="section level1">
<h1><span class="header-section-number">6</span> Detección, tratamiento e imputación de datos faltantes</h1>
<p>En nuestros datos no tenemos datos faltantes, pero gracias al análisis exploratorio previamente hecho nos hemos dado cuenta de que tenemos outliers en diferentes variables.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1"><span class="co">#Contar el total de NAs en la base de datos</span></a>
<a class="sourceLine" id="cb60-2" title="2"><span class="kw">sum</span>(<span class="kw">is.na</span>(datos_train))</a></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>En el caso de la variable <strong>Bedrooms</strong> hemos visto que hay 13 casas con 0 habitaciones y una con 33. Como en nuestro estudio no tenemos datos faltantes. Hemos comprobado con la latitud y la longitud (véase la Figura 1), que la casa con 33 habitaciones es un dato erróneo, ya que su estructura es muy parecida a las casas de los alrededores y no tienen 33 habitaciones. Lo que vamos a hacer a continuación es suponer que la casa con 33 habitaciones es un NA y estudiar cómo imputar ese dato faltante.</p>
<div class="figure">
<img src="Casa%20con%2033%20habitaciones_v2.jpg" alt="Figura 1" style="width:90.0%" />
<p class="caption">Figura 1</p>
</div>
<p>Primero nos vamos a crear un dataframe auxiliar para probar diferentes métodos y poder tomar una decisión.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1">datos_train<span class="op">$</span>posicion&lt;-<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(datos_train))</a>
<a class="sourceLine" id="cb62-2" title="2"></a>
<a class="sourceLine" id="cb62-3" title="3">indice_hab33 &lt;-<span class="st"> </span>datos_train[datos_train<span class="op">$</span>bedrooms<span class="op">==</span><span class="dv">33</span>,]<span class="op">$</span>posicion</a>
<a class="sourceLine" id="cb62-4" title="4">indice_hab33</a></code></pre></div>
<pre><code>## [1] 8742</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1">datos_train_aux1 &lt;-<span class="st"> </span>datos_train</a>
<a class="sourceLine" id="cb64-2" title="2"></a>
<a class="sourceLine" id="cb64-3" title="3">datos_train_aux1<span class="op">$</span>bedrooms[datos_train_aux1<span class="op">$</span>bedrooms<span class="op">==</span><span class="dv">33</span>] &lt;-<span class="ot">NA</span></a>
<a class="sourceLine" id="cb64-4" title="4"><span class="co">#sum(is.na(datos_train_aux))</span></a>
<a class="sourceLine" id="cb64-5" title="5"></a>
<a class="sourceLine" id="cb64-6" title="6">datos_train_aux2 &lt;-<span class="st"> </span>datos_train</a>
<a class="sourceLine" id="cb64-7" title="7"></a>
<a class="sourceLine" id="cb64-8" title="8">datos_train_aux2<span class="op">$</span>bedrooms[datos_train_aux2<span class="op">$</span>bedrooms<span class="op">==</span><span class="dv">33</span>] &lt;-<span class="ot">NA</span></a>
<a class="sourceLine" id="cb64-9" title="9"></a>
<a class="sourceLine" id="cb64-10" title="10">datos_train_aux3 &lt;-<span class="st"> </span>datos_train</a>
<a class="sourceLine" id="cb64-11" title="11"></a>
<a class="sourceLine" id="cb64-12" title="12">datos_train_aux3<span class="op">$</span>bedrooms[datos_train_aux3<span class="op">$</span>bedrooms<span class="op">==</span><span class="dv">33</span>] &lt;-<span class="ot">NA</span></a></code></pre></div>
<p>Ahora lo vamos a imputar mediante regresión simple:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1">datos_mice&lt;-datos_train_aux1[,<span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">15</span>,<span class="dv">16</span>)]</a>
<a class="sourceLine" id="cb65-2" title="2"></a>
<a class="sourceLine" id="cb65-3" title="3"><span class="co">#dist(datos_train[8742,18:19])</span></a>
<a class="sourceLine" id="cb65-4" title="4"></a>
<a class="sourceLine" id="cb65-5" title="5"><span class="co"># Imputación simple, regresión ordinaria:</span></a>
<a class="sourceLine" id="cb65-6" title="6"></a>
<a class="sourceLine" id="cb65-7" title="7">imp_<span class="dv">1</span> =<span class="st"> </span><span class="kw">mice</span>(datos_mice, <span class="dt">method =</span> <span class="st">&quot;norm.predict&quot;</span>, <span class="dt">m=</span><span class="dv">1</span>) <span class="co"># Cálculo método de imputación</span></a></code></pre></div>
<pre><code>## 
##  iter imp variable
##   1   1  bedrooms
##   2   1  bedrooms
##   3   1  bedrooms
##   4   1  bedrooms
##   5   1  bedrooms</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1">datostrain_mice =<span class="st"> </span><span class="kw">complete</span>(imp_<span class="dv">1</span>)  <span class="co"># Imputación de valores</span></a>
<a class="sourceLine" id="cb67-2" title="2"></a>
<a class="sourceLine" id="cb67-3" title="3">datostrain_mice<span class="op">$</span>posicion&lt;-<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(datostrain_mice))</a>
<a class="sourceLine" id="cb67-4" title="4"></a>
<a class="sourceLine" id="cb67-5" title="5"><span class="co">#Ha imputado:</span></a>
<a class="sourceLine" id="cb67-6" title="6">datostrain_mice[datostrain_mice<span class="op">$</span>posicion <span class="op">==</span><span class="st"> </span>indice_hab33,]<span class="op">$</span>bedrooms</a></code></pre></div>
<pre><code>## [1] 3.195055</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1"><span class="co">#floor(datostrain_mice[datostrain_mice$posicion == indice_hab33,]$bedrooms)</span></a></code></pre></div>
<p>Ha imputado con el valor 3.208425. Como las habitaciones toman valores discretos, nos quedamos con 3 habitaciones.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1"><span class="co"># SI QUEREMOS EJECUTAR ESTO HAY QUE HACER EL FLOOR() DE ARRIBA PARA QUE NO SALGA DECIMAL LA HABITACION</span></a>
<a class="sourceLine" id="cb70-2" title="2"><span class="co">#sólo hago los gráficos para ver el valor que ha imputado</span></a>
<a class="sourceLine" id="cb70-3" title="3"><span class="co"># ggplot(datostrain_mice, aes(x=as.factor(bedrooms), y=price, fill=bedrooms)) + geom_boxplot() + guides(fill=FALSE)</span></a>
<a class="sourceLine" id="cb70-4" title="4"><span class="co"># Para imputar los datos faltantes o erróneos ver qué técnica usar:</span></a>
<a class="sourceLine" id="cb70-5" title="5"><span class="co"># datos$bedrooms[datos$bedrooms==0] = mean(datos$bedrooms)</span></a>
<a class="sourceLine" id="cb70-6" title="6"><span class="co"># datos$bedrooms[datos$bedrooms==33] = mean(datos$bedrooms)</span></a>
<a class="sourceLine" id="cb70-7" title="7"><span class="co"># Repasar qué técnicas usar</span></a></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1">datos_mice2&lt;-datos_train_aux2[,<span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">15</span>,<span class="dv">16</span>)]</a></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1"><span class="co"># Imputación multiple, regresión estocástica:</span></a>
<a class="sourceLine" id="cb72-2" title="2"></a>
<a class="sourceLine" id="cb72-3" title="3">imp_<span class="dv">2</span> =<span class="st"> </span><span class="kw">mice</span>(datos_mice2, <span class="dt">method =</span> <span class="st">&quot;norm.nob&quot;</span>, <span class="dt">seed=</span><span class="dv">1234</span>)<span class="co"># Cálculo método de imputación</span></a></code></pre></div>
<pre><code>## 
##  iter imp variable
##   1   1  bedrooms
##   1   2  bedrooms
##   1   3  bedrooms
##   1   4  bedrooms
##   1   5  bedrooms
##   2   1  bedrooms
##   2   2  bedrooms
##   2   3  bedrooms
##   2   4  bedrooms
##   2   5  bedrooms
##   3   1  bedrooms
##   3   2  bedrooms
##   3   3  bedrooms
##   3   4  bedrooms
##   3   5  bedrooms
##   4   1  bedrooms
##   4   2  bedrooms
##   4   3  bedrooms
##   4   4  bedrooms
##   4   5  bedrooms
##   5   1  bedrooms
##   5   2  bedrooms
##   5   3  bedrooms
##   5   4  bedrooms
##   5   5  bedrooms</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1">datostrain_mice2 =<span class="st"> </span><span class="kw">complete</span>(imp_<span class="dv">2</span>)  <span class="co"># Imputación de valores sustiyuye 33</span></a>
<a class="sourceLine" id="cb74-2" title="2"></a>
<a class="sourceLine" id="cb74-3" title="3">datostrain_mice2<span class="op">$</span>posicion&lt;-<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(datostrain_mice2))</a>
<a class="sourceLine" id="cb74-4" title="4"></a>
<a class="sourceLine" id="cb74-5" title="5"><span class="co">#Ha imputado:</span></a>
<a class="sourceLine" id="cb74-6" title="6">datostrain_mice2[datostrain_mice2<span class="op">$</span>posicion <span class="op">==</span><span class="st"> </span>indice_hab33,]<span class="op">$</span>bedrooms</a></code></pre></div>
<pre><code>## [1] 3.198521</code></pre>
<p>En este caso el valor que toma es 3.211892, por lo que coincide con el anterior en que son 3 habitaciones lo que tenemos que imputar.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1"><span class="co">#sólo hago los gráficos para ver el valor que ha imputado </span></a>
<a class="sourceLine" id="cb76-2" title="2"><span class="co"># </span></a>
<a class="sourceLine" id="cb76-3" title="3"><span class="co"># ggplot(datostrain_mice2, aes(x=as.factor(bedrooms), y=price, fill=bedrooms)) + geom_boxplot() + guides(fill=FALSE)</span></a></code></pre></div>
<p>Otro modo de imputar el dato faltante es compararlo con los vecinos más cercanos.Para ello lo que hemos ehcho es calcular la diferencia entre la latitud de la casa con 33 habitaciones con el resto y lo mismo para la longitud. Luego hemos sumado esas diferenecias y nos hemos quedado con las 15 distancias más pequeñas.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">datos_train_aux3<span class="op">$</span>diferencia_lat&lt;-<span class="st"> </span><span class="kw">abs</span>(datos_train<span class="op">$</span>lat[datos_train<span class="op">$</span>bedrooms<span class="op">==</span><span class="dv">33</span>]<span class="op">-</span>datos_train[,<span class="dv">18</span>])</a>
<a class="sourceLine" id="cb77-2" title="2"></a>
<a class="sourceLine" id="cb77-3" title="3">datos_train_aux3<span class="op">$</span>diferencia_long&lt;-<span class="st"> </span><span class="kw">abs</span>(datos_train<span class="op">$</span>long[datos_train<span class="op">$</span>bedrooms<span class="op">==</span><span class="dv">33</span>]<span class="op">-</span>datos_train[,<span class="dv">19</span>])</a>
<a class="sourceLine" id="cb77-4" title="4"></a>
<a class="sourceLine" id="cb77-5" title="5">datos_train_aux3<span class="op">$</span>diferencia_total &lt;-<span class="st"> </span>datos_train_aux3<span class="op">$</span>diferencia_lat<span class="op">+</span>datos_train_aux3<span class="op">$</span>diferencia_long</a>
<a class="sourceLine" id="cb77-6" title="6"></a>
<a class="sourceLine" id="cb77-7" title="7">casas_mas_cercanas &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">sort</span>(datos_train_aux3<span class="op">$</span>diferencia_total,<span class="dt">index.return=</span><span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb77-8" title="8">indices_casas_cercanas &lt;-<span class="st"> </span>casas_mas_cercanas<span class="op">$</span>ix[<span class="dv">2</span><span class="op">:</span><span class="dv">16</span>] <span class="co"># la primera no se coge porque es la propia casa con 33 habitaciones</span></a>
<a class="sourceLine" id="cb77-9" title="9"></a>
<a class="sourceLine" id="cb77-10" title="10"><span class="kw">mean</span>(datos_train_aux3<span class="op">$</span>bedrooms[indices_casas_cercanas])</a></code></pre></div>
<pre><code>## [1] 3.2</code></pre>
<p>El resultado que obtenemos en este caso es 3.333333. Al igual que en los métodos anteriores, la imputación sería de 3 habitaciones.</p>
<p>Por lo que finalmente imputamos que esa casa tiene 3 habitaciones.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1">datos_train[datos_train<span class="op">$</span>posicion <span class="op">==</span><span class="st"> </span>indice_hab33,]<span class="op">$</span>bedrooms =<span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<p>Con el Boxplot observamos lo siguiente:</p>
<ul>
<li><p>La casa que tiene <strong>33 habitaciones</strong> tiene menos pies cuadrados que el resto de las casas, por lo que confirma que es un dato erróneo.(Podríamos elimarlo)</p></li>
<li><p>Las casas que tienen <strong>0 habitaciones</strong> (13 casas), tienen más pies cuadrados, por lo que sería también un dato erróneo, ya que revisando en google maps por las corrdenadas longitud y la latitud son casas que incluso tienen varias plantas.</p></li>
</ul>
<p>En el caso de la variable <em>Bathroom</em> hemos visto que hay 10 casas con 0 baños. Vamos a comparar la variable número de baños con los pies cuadrados habitables. Porque con un razonamiento lógico cuanto más espacio más número de baños.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1"><span class="kw">ggplot</span>(datos_train, <span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">as.factor</span>(bathrooms), <span class="dt">y=</span>log_price, <span class="dt">fill=</span>bathrooms)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">guides</span>(<span class="dt">fill=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="PrácticaFundamentos_Casas_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1"><span class="kw">ggplot</span>(datos_train, <span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">as.factor</span>(floors), <span class="dt">y=</span>log_price, <span class="dt">fill=</span>floors)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">guides</span>(<span class="dt">fill=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="PrácticaFundamentos_Casas_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" title="1"><span class="co">#imagen=paste(&quot;C:/Users/natal/OneDrive/Documentos/0_MIS_DOCUMENTOS/2.MÁSTER/2_Curso_2019-2020/Primer_Cuatrimestre/2.Fundamentos_de_Análisis/BloqueIV_Métodos/Práctica final/git&quot;,&quot;Casa_33habitaciones_v2.jpeg&quot;)</span></a>
<a class="sourceLine" id="cb82-2" title="2"><span class="co">#knitr::include_graphics(imagen)</span></a></code></pre></div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="análisis-exploratorio-de-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="selección-de-variable.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

</body>

</html>
